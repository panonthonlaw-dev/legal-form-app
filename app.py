import streamlit as st
import graphviz

# --- ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô ---
st.set_page_config(page_title="Law Mini-Map", layout="wide")

# Custom CSS ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° Minimal
st.markdown("""
    <style>
    .main { background-color: #f9f9f9; }
    .stButton>button { width: 100%; border-radius: 5px; height: 3em; background-color: #ffffff; }
    .course-card { padding: 20px; border-radius: 10px; border: 1px solid #ddd; text-align: center; }
    </style>
    """, unsafe_allow_html=True)

# --- ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡∏ä‡∏≤‡πÅ‡∏•‡∏∞‡∏°‡∏≤‡∏ï‡∏£‡∏≤ ---
courses = {
    "‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Home)": None,
    "‡∏ô‡∏¥‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏ç‡∏ç‡∏≤": {
        "149": {"title": "‡∏°. 149 - ‡∏Ñ‡∏≥‡∏ô‡∏¥‡∏¢‡∏≤‡∏°‡∏ô‡∏¥‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°", "detail": "‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡πÜ ‡∏≠‡∏±‡∏ô‡∏ó‡∏≥‡∏•‡∏á‡πÇ‡∏î‡∏¢‡∏ä‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏î‡πâ‡∏ß‡∏¢‡πÉ‡∏à‡∏™‡∏°‡∏±‡∏Ñ‡∏£...", "conns": ["150", "152"]},
        "150": {"title": "‡∏°. 150 - ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πâ‡∏≤‡∏°", "detail": "‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡∏°‡∏µ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πâ‡∏≤‡∏°‡∏ä‡∏±‡∏î‡πÅ‡∏à‡πâ‡∏á‡πÇ‡∏î‡∏¢‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢...‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏°‡∏Ü‡∏∞", "conns": []},
        "152": {"title": "‡∏°. 152 - ‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏ô‡∏¥‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°", "detail": "‡∏Å‡∏≤‡∏£‡πÉ‡∏î‡∏°‡∏¥‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÑ‡∏ß‡πâ ‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏°‡∏Ü‡∏∞", "conns": []}
    },
    "‡∏•‡∏∞‡πÄ‡∏°‡∏¥‡∏î": {
        "420": {"title": "‡∏°. 420 - ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ", "detail": "‡∏ú‡∏π‡πâ‡πÉ‡∏î‡∏à‡∏á‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ó‡πÄ‡∏•‡∏¥‡∏ô‡πÄ‡∏•‡πà‡∏≠ ‡∏ó‡∏≥‡∏ï‡πà‡∏≠‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏î‡∏¢‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢...", "conns": ["438", "425"]},
        "425": {"title": "‡∏°. 425 - ‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á", "detail": "‡∏ô‡∏≤‡∏¢‡∏à‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏£‡πà‡∏ß‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏Å‡∏±‡∏ö‡∏•‡∏π‡∏Å‡∏à‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏ú‡∏•‡πÅ‡∏´‡πà‡∏á‡∏•‡∏∞‡πÄ‡∏°‡∏¥‡∏î‡πÉ‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡πâ‡∏≤‡∏á", "conns": ["426"]},
        "438": {"title": "‡∏°. 438 - ‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ô‡πÑ‡∏´‡∏°‡∏ó‡∏î‡πÅ‡∏ó‡∏ô", "detail": "‡∏®‡∏≤‡∏•‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏£‡πÅ‡∏Å‡πà‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≤‡∏¢‡πÅ‡∏£‡∏á", "conns": []}
    },
    "‡∏ï‡∏±‡πã‡∏ß‡πÄ‡∏á‡∏¥‡∏ô": {
        "900": {"title": "‡∏°. 900 - ‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏•‡∏≤‡∏¢‡∏°‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠", "detail": "‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ú‡∏π‡πâ‡∏•‡∏á‡∏•‡∏≤‡∏¢‡∏°‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡∏ï‡∏±‡πã‡∏ß‡πÄ‡∏á‡∏¥‡∏ô‡∏¢‡πà‡∏≠‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏ï‡∏±‡πã‡∏ß", "conns": ["904"]},
        "904": {"title": "‡∏°. 904 - ‡∏ú‡∏π‡πâ‡∏ó‡∏£‡∏á", "detail": "‡∏ú‡∏π‡πâ‡∏°‡∏µ‡∏ï‡∏±‡πã‡∏ß‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏ê‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏•‡∏±‡∏Å‡∏´‡∏•‡∏±‡∏á", "conns": []}
    },
    "‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‡∏à‡∏≥‡∏ô‡∏≥ ‡∏à‡∏≥‡∏ô‡∏≠‡∏á": {
        "680": {"title": "‡∏°. 680 - ‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô", "detail": "‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡∏ú‡∏π‡∏Å‡∏û‡∏±‡∏ô‡∏ï‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏ä‡∏≥‡∏£‡∏∞", "conns": ["681", "702", "747"]},
        "702": {"title": "‡∏°. 702 - ‡∏à‡∏≥‡∏ô‡∏≠‡∏á", "detail": "‡∏Å‡∏≤‡∏£‡πÄ‡∏≠‡∏≤‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏ï‡∏£‡∏≤‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö", "conns": []},
        "747": {"title": "‡∏°. 747 - ‡∏à‡∏≥‡∏ô‡∏≥", "detail": "‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏£‡∏¥‡∏°‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ", "conns": []}
    },
    "‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô ‡∏ô‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤": {
        "797": {"title": "‡∏°. 797 - ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô", "detail": "‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏≠‡∏≥‡∏ô‡∏≤‡∏à‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÅ‡∏ó‡∏ô‡∏≠‡∏µ‡∏Å‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏Å‡∏≤‡∏£", "conns": ["820", "845"]},
        "820": {"title": "‡∏°. 820 - ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡∏Å‡∏≤‡∏£", "detail": "‡∏ï‡∏±‡∏ß‡∏Å‡∏≤‡∏£‡∏ï‡πâ‡∏≠‡∏á‡∏ú‡∏π‡∏Å‡∏û‡∏±‡∏ô‡∏ï‡πà‡∏≠‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‡πÉ‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÅ‡∏ó‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡πÑ‡∏õ‡πÉ‡∏ô‡∏Ç‡∏≠‡∏ö‡∏≠‡∏≥‡∏ô‡∏≤‡∏à", "conns": []},
        "845": {"title": "‡∏°. 845 - ‡∏ô‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤", "detail": "‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ú‡∏π‡πâ‡∏ï‡∏Å‡∏•‡∏á‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏Ñ‡πà‡∏≤‡∏ö‡∏≥‡πÄ‡∏´‡∏ô‡πá‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ä‡∏µ‡πâ‡∏ä‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Å‡∏±‡∏ô", "conns": []}
    }
}

# --- Sidebar ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤ ---
with st.sidebar:
    st.title("üìö Law Menu")
    selection = st.radio("‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤:", list(courses.keys()))
    st.divider()
    st.caption("‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ô‡∏¥‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‡∏õ.‡∏ï‡∏£‡∏µ")

# --- ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Minimal Home) ---
if selection == "‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Home)":
    st.markdown("<br><br>", unsafe_allow_html=True)
    st.markdown("<h1 style='text-align: center;'>‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</h1>", unsafe_allow_html=True)
    st.markdown("<p style='text-align: center; color: gray;'>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏ñ‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</p>", unsafe_allow_html=True)
    
    # ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ö‡∏ö Card ‡∏á‡πà‡∏≤‡∏¢‡πÜ
    cols = st.columns(len(courses)-1)
    for i, course_name in enumerate(list(courses.keys())[1:]):
        with cols[i % len(cols)]:
            st.markdown(f"<div class='course-card'><b>{course_name}</b></div>", unsafe_allow_html=True)

# --- ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏ß‡∏¥‡∏ä‡∏≤ ---
else:
    st.header(f"‡∏ß‡∏¥‡∏ä‡∏≤: {selection}")
    data = courses[selection]
    
    # ‡∏ß‡∏≤‡∏î Graph
    dot = graphviz.Digraph()
    dot.attr(rankdir='LR')
    for sec, info in data.items():
        dot.node(sec, f"‡∏°. {sec}", style='filled', fillcolor='#E1F5FE')
        for conn in info['conns']:
            dot.edge(sec, conn)
    
    col_map, col_txt = st.columns([2, 1])
    
    with col_map:
        st.graphviz_chart(dot)
    
    with col_txt:
        selected_sec = st.selectbox("‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏°‡∏≤‡∏ï‡∏£‡∏≤:", list(data.keys()))
        if selected_sec:
            st.info(f"**{data[selected_sec]['title']}**")
            st.write(data[selected_sec]['detail'])
