import streamlit as st
import graphviz

st.set_page_config(page_title="Law Map & Dika", layout="wide")

# --- ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏ï‡∏£‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏é‡∏µ‡∏Å‡∏≤‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå ---
# (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ö‡∏≤‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏ô dika_list ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö)
law_data = {
    "‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô": {
        "color": "#E3F2FD",
        "nodes": {
            "680": {
                "label": "‡∏°. 680\n‡∏´‡∏•‡∏±‡∏Å‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô",
                "dika": [
                    {"no": "‡∏é‡∏µ‡∏Å‡∏≤‡∏ó‡∏µ‡πà 1923/2560", "text": "‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏•‡∏≤‡∏¢‡∏°‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡∏ü‡πâ‡∏≠‡∏á‡∏£‡πâ‡∏≠‡∏á‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏Ñ‡∏î‡∏µ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ"},
                    {"no": "‡∏é‡∏µ‡∏Å‡∏≤‡∏ó‡∏µ‡πà 851/2510", "text": "‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÑ‡∏î‡πâ"}
                ]
            },
            "681": {
                "label": "‡∏°. 681\n‡∏´‡∏ô‡∏µ‡πâ‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå",
                "dika": [
                    {"no": "‡∏é‡∏µ‡∏Å‡∏≤‡∏ó‡∏µ‡πà 1242/2522", "text": "‡∏´‡∏ô‡∏µ‡πâ‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏°‡∏Ü‡∏µ‡∏¢‡∏∞ ‡πÅ‡∏ï‡πà‡∏ú‡∏π‡πâ‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏´‡∏ï‡∏∏‡∏ô‡∏±‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏°‡∏ï‡∏Å‡∏•‡∏á‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå"},
                    {"no": "‡∏é‡∏µ‡∏Å‡∏≤‡∏ó‡∏µ‡πà 5963/2552", "text": "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡∏µ‡πâ‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏Ç‡∏≤‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏° ‡∏ú‡∏π‡πâ‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏¢‡πà‡∏≠‡∏°‡∏´‡∏•‡∏∏‡∏î‡∏û‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î"}
                ]
            },
            "681/1": {
                "label": "‡∏°. 681/1\n‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡∏£‡πà‡∏ß‡∏°",
                "dika": [
                    {"no": "‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï", "text": "‡∏°‡∏≤‡∏ï‡∏£‡∏≤‡∏ô‡∏µ‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏õ‡∏µ 2558: ‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡∏£‡πà‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏°‡∏Ü‡∏∞"}
                ]
            },
            "686": {
                "label": "‡∏°. 686\n‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏Å‡∏Å‡∏•‡πà‡∏≤‡∏ß",
                "dika": [
                    {"no": "‡∏é‡∏µ‡∏Å‡∏≤‡∏ó‡∏µ‡πà 5543/2562", "text": "‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡πà‡∏á‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ö‡∏≠‡∏Å‡∏Å‡∏•‡πà‡∏≤‡∏ß‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 60 ‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡∏ú‡∏¥‡∏î‡∏ô‡∏±‡∏î ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ô‡πÑ‡∏´‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ"}
                ]
            },
            "694": {
                "label": "‡∏°. 694\n‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ",
                "dika": [
                    {"no": "‡∏é‡∏µ‡∏Å‡∏≤‡∏ó‡∏µ‡πà 352/2544", "text": "‡∏ú‡∏π‡πâ‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏ô‡∏µ‡πâ‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏Ç‡∏≤‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ ‡πÅ‡∏°‡πâ‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏™‡∏•‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πÑ‡∏°‡πà‡∏¢‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏π‡πâ‡πÄ‡∏≠‡∏á‡∏Å‡πá‡∏ï‡∏≤‡∏°"}
                ]
            }
        },
        "edges": [("680", "681"), ("681", "681/1"), ("681/1", "686")]
    },
    "‡∏à‡∏≥‡∏ô‡∏≠‡∏á": {
        "color": "#E8F5E9",
        "nodes": {
            "702": {
                "label": "‡∏°. 702\n‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏≥‡∏ô‡∏≠‡∏á",
                "dika": [
                    {"no": "‡∏é‡∏µ‡∏Å‡∏≤‡∏ó‡∏µ‡πà 1852/2550", "text": "‡πÅ‡∏°‡πâ‡∏´‡∏ô‡∏µ‡πâ‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡∏Ç‡∏≤‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏Ñ‡∏ß‡∏≤‡∏° ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏≠‡∏á‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÇ‡∏†‡∏Ñ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏Å‡∏¥‡∏ô 5 ‡∏õ‡∏µ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ"}
                ]
            },
            "714": {
                "label": "‡∏°. 714\n‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤",
                "dika": [
                    {"no": "‡∏é‡∏µ‡∏Å‡∏≤‡∏ó‡∏µ‡πà 698/2522", "text": "‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏°‡∏≠‡∏ö‡πÇ‡∏â‡∏ô‡∏î‡πÑ‡∏ß‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÄ‡∏â‡∏¢‡πÜ ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏ô‡∏≠‡∏á ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÅ‡∏•‡∏∞‡∏à‡∏î‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô"}
                ]
            },
            "733": {
                "label": "‡∏°. 733\n‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏î",
                "dika": [
                    {"no": "‡∏é‡∏µ‡∏Å‡∏≤‡∏ó‡∏µ‡πà 15155/2555", "text": "‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ï‡∏Å‡∏•‡∏á‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏≤ 733 ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ç‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏ï‡∏•‡∏≤‡∏î‡πÑ‡∏î‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡∏´‡∏ô‡∏µ‡πâ ‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠"}
                ]
            }
        },
        "edges": [("702", "714"), ("714", "733")]
    }
}

# --- Sidebar ---
st.sidebar.title("üìå ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ô")
choice = st.sidebar.radio("‡πÄ‡∏°‡∏ô‡∏π:", ["‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Home)", "‡∏Ñ‡πâ‡∏≥‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô", "‡∏à‡∏≥‡∏ô‡∏≠‡∏á", "‡∏à‡∏≥‡∏ô‡∏≥"])

# --- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏î Graph ---
def draw_chart(category):
    data = law_data.get(category)
    if not data: return None
    dot = graphviz.Digraph()
    dot.attr(rankdir='LR')
    dot.attr('node', shape='box', style='filled, rounded', fontname='Tahoma', fillcolor=data['color'])
    
    for node_id, info in data['nodes'].items():
        dot.node(node_id, info['label'])
    for start, end in data['edges']:
        dot.edge(start, end)
    return dot

# --- ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• ---
if choice == "‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (Home)":
    st.markdown("<h1 style='text-align: center;'>Legal Study Companion</h1>", unsafe_allow_html=True)
    st.markdown("<p style='text-align: center;'>‡∏™‡∏£‡∏∏‡∏õ‡∏°‡∏≤‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏∞‡∏é‡∏µ‡∏Å‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ô‡∏¥‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</p>", unsafe_allow_html=True)
    st.divider()
    st.write("### üìñ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô\n1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å‡πÅ‡∏ñ‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢\n2. ‡∏î‡∏π‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏°‡∏≤‡∏ï‡∏£‡∏≤‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á\n3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏°‡∏≤‡∏ï‡∏£‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡πà‡∏≤‡∏ô **‡∏Ñ‡∏≥‡∏û‡∏¥‡∏û‡∏≤‡∏Å‡∏©‡∏≤‡∏®‡∏≤‡∏•‡∏é‡∏µ‡∏Å‡∏≤** ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á")

elif choice in law_data:
    st.header(f"‚öñÔ∏è ‡∏ß‡∏¥‡∏ä‡∏≤{choice}")
    st.graphviz_chart(draw_chart(choice))
    
    st.divider()
    # ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏é‡∏µ‡∏Å‡∏≤
    selected_sec = st.selectbox("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏≤‡∏ï‡∏£‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏é‡∏µ‡∏Å‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö:", list(law_data[choice]['nodes'].keys()))
    
    if selected_sec:
        section_info = law_data[choice]['nodes'][selected_sec]
        st.subheader(f"üîç ‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á {selected_sec}")
        
        if "dika" in section_info:
            for d in section_info['dika']:
                with st.expander(f"üî¥ {d['no']}"):
                    st.write(d['text'])
        else:
            st.write("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏é‡∏µ‡∏Å‡∏≤‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•")

else:
    st.warning("‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏ï‡∏£‡∏≤‡πÅ‡∏•‡∏∞‡∏é‡∏µ‡∏Å‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡∏£‡∏±‡∏ö")
